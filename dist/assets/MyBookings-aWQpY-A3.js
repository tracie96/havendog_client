import{r as t,ag as n,j as e,b$ as m,ad as h,bY as x,b_ as j,ae as p}from"./index-DnL67hiT.js";import{L as a}from"./index-CJC3znrc.js";import{R as u}from"./EnvironmentOutlined-DZPhHmUz.js";import{R as I}from"./ClockCircleOutlined-B8UzThJg.js";import"./index-CPOCjh1U.js";import"./LeftOutlined-BIndlVMR.js";const{TabPane:g}=m,V=()=>{const[r,f]=t.useState(!0),[y,B]=t.useState([]),[v,w]=t.useState([]);t.useEffect(()=>{i()},[]);const i=async()=>{try{const[s,o]=await Promise.all([fetch("/api/bookings/boarding"),fetch("/api/bookings/vet")]),l=await s.json(),S=await o.json();B(l),w(S)}catch{n.error("Failed to fetch bookings")}finally{f(!1)}},c=async(s,o)=>{try{await fetch(`/api/bookings/${s}/cancel`,{method:"POST"}),n.success("Booking cancelled successfully"),i()}catch{n.error("Failed to cancel booking")}},d=s=>{switch(s.toLowerCase()){case"confirmed":return"green";case"pending":return"orange";case"cancelled":return"red";case"completed":return"blue";default:return"default"}},C=()=>e.jsx(a,{loading:r,dataSource:y,renderItem:s=>e.jsx(a.Item,{children:e.jsx(h,{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:s.petName}),e.jsxs("p",{children:[e.jsx("strong",{children:"Boarder:"})," ",s.boarderName]}),e.jsxs("p",{children:[e.jsx(x,{})," ",new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx(u,{})," ",s.location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rate:"})," $",s.rate,"/day"]})]}),e.jsxs("div",{children:[e.jsx(j,{color:d(s.status),children:s.status}),s.status==="pending"&&e.jsx(p,{danger:!0,onClick:()=>c(s.id),style:{marginTop:8},children:"Cancel"})]})]})})})}),D=()=>e.jsx(a,{loading:r,dataSource:v,renderItem:s=>e.jsx(a.Item,{children:e.jsx(h,{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:s.petName}),e.jsxs("p",{children:[e.jsx("strong",{children:"Veterinarian:"})," ",s.vetName]}),e.jsxs("p",{children:[e.jsx(x,{})," ",new Date(s.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx(I,{})," ",s.time]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.appointmentType]}),e.jsxs("p",{children:[e.jsx(u,{})," ",s.clinicName]})]}),e.jsxs("div",{children:[e.jsx(j,{color:d(s.status),children:s.status}),s.status==="pending"&&e.jsx(p,{danger:!0,onClick:()=>c(s.id),style:{marginTop:8},children:"Cancel"})]})]})})})});return e.jsxs("div",{children:[e.jsx("h2",{children:"My Bookings"}),e.jsxs(m,{defaultActiveKey:"boarding",children:[e.jsx(g,{tab:"Boarding Bookings",children:C()},"boarding"),e.jsx(g,{tab:"Veterinary Appointments",children:D()},"vet")]})]})};export{V as default};
