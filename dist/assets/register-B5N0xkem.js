import{p as T,x as q,j as e,y as S,z as O}from"./index-Dsq4HvsK.js";import{u as M,r as b,L as R}from"./vendor-Dk2ZNgAq.js";import{A as E}from"./AuthWrapper-DR0vCivm.js";import{F as s,k as d,l as a,I as n,G as j,h as V,H as A,B as x,s as u,L as k,S as w,g as L}from"./antd-CgienqUN.js";import"./index-CMAsk_ig.js";const{Option:m}=j,U=()=>{const g=T(),v=M(),{loading:N}=q(t=>t.auth),[l,f]=b.useState(0),[p]=s.useForm(),[y,I]=b.useState({}),F=async t=>{try{const r={...y,...t};console.log("Final Form Values:",r);const o=["firstName","lastName","email","password","userType","phoneNumber","address"].filter(C=>!r[C]);if(o.length>0){console.log("Missing Fields:",o),u.error(`Please fill in all required fields: ${o.join(", ")}`);return}const c={firstName:r.firstName,lastName:r.lastName,email:r.email,password:r.password,userType:r.userType,phoneNumber:r.phoneNumber,address:r.address,...r.petOwnerInfo&&{petOwnerInfo:r.petOwnerInfo},...r.veterinarianInfo&&{veterinarianInfo:r.veterinarianInfo}};console.log("Registration Data:",c),await g(O(c)).unwrap(),u.success("Registration successful!"),v("/dashboard")}catch(r){console.error("Registration Error:",r),u.error(r.message||"Registration failed")}},P=async()=>{try{if(l===0){const t=await p.validateFields(["firstName","lastName","email","password","phoneNumber","address"]);I(r=>({...r,...t}))}else if(l===1){const t=await p.validateFields(["userType"]);I(r=>({...r,...t}))}f(l+1)}catch(t){(t.errorFields||[]).length>0&&u.error("Please fill in all required fields for this step")}},z=()=>{f(l-1)},h=[{title:"Basic Info",content:e.jsxs(d,{gutter:[16,16],children:[e.jsx(a,{xs:24,sm:12,children:e.jsx(s.Item,{name:"firstName",label:"First Name",rules:[{required:!0,message:"Please input your first name!"}],children:e.jsx(n,{size:"large"})})}),e.jsx(a,{xs:24,sm:12,children:e.jsx(s.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,message:"Please input your last name!"}],children:e.jsx(n,{size:"large"})})}),e.jsx(a,{xs:24,children:e.jsx(s.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email!"}],children:e.jsx(n,{size:"large"})})}),e.jsx(a,{xs:24,sm:12,children:e.jsx(s.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password must be at least 6 characters!"}],children:e.jsx(n.Password,{size:"large"})})}),e.jsx(a,{xs:24,sm:12,children:e.jsx(s.Item,{name:"phoneNumber",label:"Phone Number",rules:[{required:!0,message:"Please input your phone number!"}],children:e.jsx(n,{size:"large"})})}),e.jsx(a,{xs:24,children:e.jsx(s.Item,{name:"address",label:"Address",rules:[{required:!0,message:"Please input your address!"}],children:e.jsx(n.TextArea,{size:"large",rows:3})})})]})},{title:"User Type",content:e.jsx(d,{justify:"center",children:e.jsx(a,{xs:24,sm:16,children:e.jsx(s.Item,{name:"userType",label:"User Type",rules:[{required:!0,message:"Please select your user type!"}],children:e.jsxs(j,{size:"large",children:[e.jsx(m,{value:"petOwner",children:"Pet Owner"}),e.jsx(m,{value:"veterinarian",children:"Veterinarian"})]})})})})},{title:"Additional Info",content:e.jsx(s.Item,{noStyle:!0,shouldUpdate:(t,r)=>t.userType!==r.userType,children:({getFieldValue:t})=>t("userType")==="petOwner"?e.jsxs(d,{gutter:[16,16],children:[e.jsx(a,{xs:24,sm:12,children:e.jsx(s.Item,{name:["petOwnerInfo","preferredContactMethod"],label:"Preferred Contact Method",rules:[{required:!0,message:"Please select your preferred contact method!"}],children:e.jsxs(j,{size:"large",children:[e.jsx(m,{value:"phone",children:"Phone Call"}),e.jsx(m,{value:"text",children:"Text Message"})]})})}),e.jsx(a,{xs:24,sm:12,children:e.jsx(s.Item,{noStyle:!0,shouldUpdate:(r,i)=>{var o,c;return((o=r.petOwnerInfo)==null?void 0:o.preferredContactMethod)!==((c=i.petOwnerInfo)==null?void 0:c.preferredContactMethod)},children:({getFieldValue:r})=>{const i=r(["petOwnerInfo","preferredContactMethod"]);return e.jsx(s.Item,{name:["petOwnerInfo","contactInfo"],label:"Contact Information",rules:[{required:!0,message:`Please input your ${i||"contact"} information!`,type:i==="email"?"email":void 0,pattern:i==="phone"||i==="text"?/^\+?[1-9]\d{1,14}$/:void 0}],children:i==="phone"||i==="text"?e.jsx(n,{size:"large",placeholder:"Enter your phone number"}):e.jsx(n,{size:"large",placeholder:"Select contact method first",disabled:!0})})}})}),e.jsx(a,{xs:24,children:e.jsx(s.Item,{name:["petOwnerInfo","emergencyContact"],label:"Emergency Contact",rules:[{required:!0,message:"Please input emergency contact information!"}],children:e.jsx(n.TextArea,{size:"large",placeholder:"Name and contact information of emergency contact",rows:2})})}),e.jsx(a,{xs:24,children:e.jsx(s.Item,{name:["petOwnerInfo","veterinarian"],label:"Current Veterinarian Service Provider",children:e.jsx(n,{size:"large",placeholder:"Current veterinarian (if any)"})})})]}):t("userType")==="veterinarian"?e.jsxs(d,{gutter:[16,16],children:[e.jsx(a,{xs:24,children:e.jsx(s.Item,{name:["veterinarianInfo","clinic"],label:"Clinic Name",rules:[{required:!0,message:"Please input your clinic name!"}],children:e.jsx(n,{size:"large"})})}),e.jsx(a,{xs:24,sm:12,children:e.jsx(s.Item,{name:["veterinarianInfo","specialization"],label:"Specialization",rules:[{required:!0,message:"Please input your specialization!"}],children:e.jsx(n,{size:"large"})})}),e.jsx(a,{xs:24,sm:12,children:e.jsx(s.Item,{name:["veterinarianInfo","experience"],label:"Years of Experience",rules:[{required:!0,message:"Please input your years of experience!"}],children:e.jsx(n,{type:"number",size:"large"})})})]}):null})}];return e.jsxs(V,{className:"w-full border-none",children:[e.jsx("div",{className:"steps-container mb-4",children:e.jsx(A,{current:l,items:h.map(t=>({title:t.title})),rootClassName:"custom-steps"})}),e.jsx("div",{className:"step-content",children:e.jsxs(s,{form:p,layout:"vertical",onFinish:F,onValuesChange:()=>g(S()),initialValues:y,children:[h[l].content,e.jsxs("div",{className:"button-container",children:[l>0?e.jsx(x,{onClick:z,size:"large",children:"Previous"}):e.jsx("div",{}),l<h.length-1?e.jsx(x,{type:"primary",onClick:P,size:"large",style:{backgroundColor:"#FF0080",borderColor:"#FF0080"},children:"Next"}):e.jsx(x,{type:"primary",htmlType:"submit",loading:N,size:"large",style:{backgroundColor:"#FF0080",borderColor:"#FF0080"},children:"Register"})]})]})})]})},{Title:D,Text:$}=L;function J(){return e.jsx(E,{children:e.jsx(k.Content,{style:{maxWidth:"100%",width:"100%",margin:"0 auto",padding:"0 16px"},children:e.jsxs(w,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxs(w,{direction:"horizontal",justify:"space-between",align:"baseline",style:{width:"100%"},children:[e.jsx(D,{level:2,children:"Sign up"}),e.jsx(R,{to:"/login",style:{textDecoration:"none",color:"#FF0080"},children:e.jsx($,{children:"Already have an account?"})})]}),e.jsx(U,{})]})})})}export{J as default};
