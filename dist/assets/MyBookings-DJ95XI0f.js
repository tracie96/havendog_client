import{j as e}from"./index-Dsq4HvsK.js";import{r as t}from"./vendor-Dk2ZNgAq.js";import{s as a,T as f,K as n,h,w as x,Y as j,f as p,B as u,$ as I}from"./antd-CgienqUN.js";const{TabPane:g}=f,N=()=>{const[r,m]=t.useState(!0),[y,B]=t.useState([]),[v,w]=t.useState([]);t.useEffect(()=>{c()},[]);const c=async()=>{try{const[s,l]=await Promise.all([fetch("/api/bookings/boarding"),fetch("/api/bookings/vet")]),o=await s.json(),S=await l.json();B(o),w(S)}catch{a.error("Failed to fetch bookings")}finally{m(!1)}},i=async(s,l)=>{try{await fetch(`/api/bookings/${s}/cancel`,{method:"POST"}),a.success("Booking cancelled successfully"),c()}catch{a.error("Failed to cancel booking")}},d=s=>{switch(s.toLowerCase()){case"confirmed":return"green";case"pending":return"orange";case"cancelled":return"red";case"completed":return"blue";default:return"default"}},C=()=>e.jsx(n,{loading:r,dataSource:y,renderItem:s=>e.jsx(n.Item,{children:e.jsx(h,{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:s.petName}),e.jsxs("p",{children:[e.jsx("strong",{children:"Boarder:"})," ",s.boarderName]}),e.jsxs("p",{children:[e.jsx(x,{})," ",new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx(j,{})," ",s.location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rate:"})," $",s.rate,"/day"]})]}),e.jsxs("div",{children:[e.jsx(p,{color:d(s.status),children:s.status}),s.status==="pending"&&e.jsx(u,{danger:!0,onClick:()=>i(s.id),style:{marginTop:8},children:"Cancel"})]})]})})})}),D=()=>e.jsx(n,{loading:r,dataSource:v,renderItem:s=>e.jsx(n.Item,{children:e.jsx(h,{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:s.petName}),e.jsxs("p",{children:[e.jsx("strong",{children:"Veterinarian:"})," ",s.vetName]}),e.jsxs("p",{children:[e.jsx(x,{})," ",new Date(s.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx(I,{})," ",s.time]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.appointmentType]}),e.jsxs("p",{children:[e.jsx(j,{})," ",s.clinicName]})]}),e.jsxs("div",{children:[e.jsx(p,{color:d(s.status),children:s.status}),s.status==="pending"&&e.jsx(u,{danger:!0,onClick:()=>i(s.id),style:{marginTop:8},children:"Cancel"})]})]})})})});return e.jsxs("div",{children:[e.jsx("h2",{children:"My Bookings"}),e.jsxs(f,{defaultActiveKey:"boarding",children:[e.jsx(g,{tab:"Boarding Bookings",children:C()},"boarding"),e.jsx(g,{tab:"Veterinary Appointments",children:D()},"vet")]})]})};export{N as default};
