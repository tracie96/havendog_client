import{a0 as d,j as e}from"./index-Dsq4HvsK.js";import{r as n}from"./vendor-Dk2ZNgAq.js";import{F as r,s as a,h as w,K as x,M as E,B as u,N as F,O as M,R as S,P as B,I as l,G as p}from"./antd-CgienqUN.js";const{Option:i}=p,R=()=>{const[y,P]=n.useState([]),[f,j]=n.useState(!1),[b,o]=n.useState(!1),[c,g]=n.useState(null),[h]=r.useForm();n.useEffect(()=>{m()},[]);const m=async()=>{try{j(!0);const t=localStorage.getItem("token"),s=await d.get("http://localhost:5000/api/auth/pets",{headers:{Authorization:`Bearer ${t}`}});P(s.data)}catch(t){a.error("Failed to fetch pets"),console.error("Error fetching pets:",t)}finally{j(!1)}},I=()=>{g(null),h.resetFields(),o(!0)},A=t=>{g(t),h.setFieldsValue({name:t.name,type:t.type,breed:t.breed,age:t.age,gender:t.gender,weight:t.weight,pictures:t.pictures,medicalHistory:t.medicalHistory}),o(!0)},k=async t=>{try{const s=localStorage.getItem("token");await d.delete(`http://localhost:5000/api/auth/pets/${t}`,{headers:{Authorization:`Bearer ${s}`}}),a.success("Pet deleted successfully"),m()}catch(s){a.error("Failed to delete pet"),console.error("Error deleting pet:",s)}},v=async t=>{try{const s=localStorage.getItem("token");c?(await d.put(`http://localhost:5000/api/auth/pets/${c._id}`,t,{headers:{Authorization:`Bearer ${s}`}}),a.success("Pet updated successfully")):(await d.post("http://localhost:5000/api/auth/pets",t,{headers:{Authorization:`Bearer ${s}`}}),a.success("Pet added successfully")),o(!1),m()}catch(s){a.error("Failed to save pet"),console.error("Error saving pet:",s)}};return e.jsxs("div",{className:"p-4",children:[e.jsx(w,{title:"My Pets",extra:e.jsx(u,{type:"primary",icon:e.jsx(S,{}),onClick:I,children:"Add Pet"}),children:e.jsx(x,{loading:f,itemLayout:"horizontal",dataSource:y,renderItem:t=>{var s;return e.jsx(x.Item,{actions:[e.jsx(u,{type:"text",icon:e.jsx(F,{}),onClick:()=>A(t)},"edit"),e.jsx(u,{type:"text",danger:!0,icon:e.jsx(M,{}),onClick:()=>k(t._id)},"delete")],children:e.jsx(x.Item.Meta,{avatar:e.jsx(E,{src:(s=t.pictures)==null?void 0:s[0]}),title:t.name,description:e.jsxs("div",{children:[e.jsxs("p",{children:["Type: ",t.type]}),e.jsxs("p",{children:["Breed: ",t.breed]}),e.jsxs("p",{children:["Age: ",t.age," years"]}),e.jsxs("p",{children:["Weight: ",t.weight," kg"]}),e.jsxs("p",{children:["Gender: ",t.gender]})]})})})}})}),e.jsx(B,{title:c?"Edit Pet":"Add New Pet",open:b,onCancel:()=>o(!1),footer:null,children:e.jsxs(r,{form:h,layout:"vertical",onFinish:v,children:[e.jsx(r.Item,{name:"name",label:"Pet Name",rules:[{required:!0,message:"Please input pet name!"}],children:e.jsx(l,{})}),e.jsx(r.Item,{name:"type",label:"Pet Type",rules:[{required:!0,message:"Please select pet type!"}],children:e.jsxs(p,{children:[e.jsx(i,{value:"dog",children:"Dog"}),e.jsx(i,{value:"cat",children:"Cat"}),e.jsx(i,{value:"bird",children:"Bird"}),e.jsx(i,{value:"other",children:"Other"})]})}),e.jsx(r.Item,{name:"breed",label:"Breed",rules:[{required:!0,message:"Please input breed!"}],children:e.jsx(l,{})}),e.jsx(r.Item,{name:"age",label:"Age (years)",rules:[{required:!0,message:"Please input age!"}],children:e.jsx(l,{type:"number"})}),e.jsx(r.Item,{name:"gender",label:"Gender",rules:[{required:!0,message:"Please select gender!"}],children:e.jsxs(p,{children:[e.jsx(i,{value:"male",children:"Male"}),e.jsx(i,{value:"female",children:"Female"})]})}),e.jsx(r.Item,{name:"weight",label:"Weight (kg)",rules:[{required:!0,message:"Please input weight!"}],children:e.jsx(l,{type:"number"})}),e.jsx(r.Item,{name:"pictures",label:"Pictures",children:e.jsx(l.TextArea,{rows:4,placeholder:"Enter picture URLs (one per line)"})}),e.jsx(r.Item,{name:"medicalHistory",label:"Medical History",children:e.jsx(l.TextArea,{rows:4})}),e.jsx(r.Item,{children:e.jsx(u,{type:"primary",htmlType:"submit",block:!0,children:c?"Update Pet":"Add Pet"})})]})})]})};export{R as default};
