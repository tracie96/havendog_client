import{j as e}from"./mui.gQp_5HAj.js";import{r as s}from"./vendor.7ih_MNs0.js";import{d as t,e as a}from"./index.BItEAo24.js";import{F as r,s as l,k as i,Y as n,Z as d,B as c,$ as o,a0 as u,m,M as h,I as p,Q as x}from"./antd.DHghpK7B.js";const{Option:j}=x,g=()=>{const[g,y]=s.useState([]),[b,P]=s.useState(!1),[I,f]=s.useState(!1),[v,w]=s.useState(null),[A]=r.useForm();s.useEffect((()=>{$()}),[]);const $=async()=>{try{P(!0);const e=localStorage.getItem("token"),s=await t.get(`${a.baseURL}/auth/pets`,{headers:{Authorization:`Bearer ${e}`}});y(s.data)}catch(e){l.error("Failed to fetch pets")}finally{P(!1)}};return e.jsxs("div",{className:"p-4",children:[e.jsx(i,{title:"My Pets",extra:e.jsx(c,{type:"primary",icon:e.jsx(m,{}),onClick:()=>{w(null),A.resetFields(),f(!0)},children:"Add Pet"}),children:e.jsx(n,{loading:b,itemLayout:"horizontal",dataSource:g,renderItem:s=>{var r;return e.jsx(n.Item,{actions:[e.jsx(c,{type:"text",icon:e.jsx(o,{}),onClick:()=>(e=>{w(e),A.setFieldsValue({name:e.name,type:e.type,breed:e.breed,age:e.age,gender:e.gender,weight:e.weight,pictures:e.pictures,medicalHistory:e.medicalHistory}),f(!0)})(s)},"edit"),e.jsx(c,{type:"text",danger:!0,icon:e.jsx(u,{}),onClick:()=>(async e=>{try{const s=localStorage.getItem("token");await t.delete(`${a.baseURL}/auth/pets/${e}`,{headers:{Authorization:`Bearer ${s}`}}),l.success("Pet deleted successfully"),$()}catch(s){l.error("Failed to delete pet")}})(s._id)},"delete")],children:e.jsx(n.Item.Meta,{avatar:e.jsx(d,{src:null==(r=s.pictures)?void 0:r[0]}),title:s.name,description:e.jsxs("div",{children:[e.jsxs("p",{children:["Type: ",s.type]}),e.jsxs("p",{children:["Breed: ",s.breed]}),e.jsxs("p",{children:["Age: ",s.age," years"]}),e.jsxs("p",{children:["Weight: ",s.weight," kg"]}),e.jsxs("p",{children:["Gender: ",s.gender]})]})})})}})}),e.jsx(h,{title:v?"Edit Pet":"Add New Pet",open:I,onCancel:()=>f(!1),footer:null,children:e.jsxs(r,{form:A,layout:"vertical",onFinish:async e=>{try{const s=localStorage.getItem("token");v?(await t.put(`${a.baseURL}/auth/pets/${v._id}`,e,{headers:{Authorization:`Bearer ${s}`}}),l.success("Pet updated successfully")):(await t.post(`${a.baseURL}/auth/pets`,e,{headers:{Authorization:`Bearer ${s}`}}),l.success("Pet added successfully")),f(!1),$()}catch(s){l.error("Failed to save pet")}},children:[e.jsx(r.Item,{name:"name",label:"Pet Name",rules:[{required:!0,message:"Please input pet name!"}],children:e.jsx(p,{})}),e.jsx(r.Item,{name:"type",label:"Pet Type",rules:[{required:!0,message:"Please select pet type!"}],children:e.jsxs(x,{children:[e.jsx(j,{value:"dog",children:"Dog"}),e.jsx(j,{value:"cat",children:"Cat"}),e.jsx(j,{value:"bird",children:"Bird"}),e.jsx(j,{value:"other",children:"Other"})]})}),e.jsx(r.Item,{name:"breed",label:"Breed",rules:[{required:!0,message:"Please input breed!"}],children:e.jsx(p,{})}),e.jsx(r.Item,{name:"age",label:"Age (years)",rules:[{required:!0,message:"Please input age!"}],children:e.jsx(p,{type:"number"})}),e.jsx(r.Item,{name:"gender",label:"Gender",rules:[{required:!0,message:"Please select gender!"}],children:e.jsxs(x,{children:[e.jsx(j,{value:"male",children:"Male"}),e.jsx(j,{value:"female",children:"Female"})]})}),e.jsx(r.Item,{name:"weight",label:"Weight (kg)",rules:[{required:!0,message:"Please input weight!"}],children:e.jsx(p,{type:"number"})}),e.jsx(r.Item,{name:"pictures",label:"Pictures",children:e.jsx(p.TextArea,{rows:4,placeholder:"Enter picture URLs (one per line)"})}),e.jsx(r.Item,{name:"medicalHistory",label:"Medical History",children:e.jsx(p.TextArea,{rows:4})}),e.jsx(r.Item,{children:e.jsx(c,{type:"primary",htmlType:"submit",block:!0,children:v?"Update Pet":"Add Pet"})})]})})]})};export{g as default};
